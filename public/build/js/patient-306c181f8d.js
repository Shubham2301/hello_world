"use strict";function showPatientInfo(t){$(".patient_list").removeClass("active"),$(".patient_info").addClass("active"),$("#patient_name").text(t.firstname),$("#patient_email").text(t.email);var e=new Date(t.birthdate),n=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate();$("#patient_dob").text(n),$("#patient_add1").text(t.addressline1+","),$("#patient_add2").text(t.addressline2+","),$("#patient_add3").text(t.city),$("#patient_phone").text(t.cellphone),$("#patient_ssn").text(t.lastfourssn),$("#select_provider_button").attr("data-id",t.id),$("#select_provider_button").addClass("active"),$("#import_patients").hide()}function getPatientInfo(t){$.ajax({url:"/patients/show",type:"GET",data:$.param(t),contentType:"text/html",async:!1,success:function(t){var e=$.parseJSON(t);showPatientInfo(e)},error:function(){alert("Error getting patient information")},cache:!1,processData:!1})}function getPatients(t){$(".patient_list").addClass("active"),$(".patient_info").removeClass("active"),$("#select_provider_button").removeClass("active"),$("#select_provider_button").attr("data-id",0),$("#import_patients").show();var e=JSON.stringify(t);$.ajax({url:"/patients/search",type:"GET",data:$.param({data:e}),contentType:"text/html",async:!1,success:function(t){var e=$.parseJSON(t),n="<p><bold>"+e.length+"<bold> results found</p><br>";e.length>0&&e.forEach(function(t){var e=new Date(t.birthdate);t.birthdate=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate(),n+='<div class="col-xs-12 patient_list_item" data-id="'+t.id+'"><div class="row content-row-margin"><div class="col-xs-6">'+t.fname+" "+t.lname+"<br> "+t.birthdate+' </div><div class="col-xs-6">'+t.email+"<br> "+t.city+" </div></div></div>"}),$(".patient_list").html(n),$(".patient_list").addClass("active")},error:function(){alert("Error searching")},cache:!1,processData:!1})}function getsearchtype(){var t=[];return $(".search_filter_item").each(function(){var e=$(this).children(".item_type").text(),n=$(this).children(".item_value").text();t.push({type:e,value:n})}),t}function getOptionContent(t,e){var n='<div class="search_filter_item"><span class="item_type">'+t+'</span>:<span class="item_value">'+e+'</span><span class="remove_option">x</span></div>';return n}function selectProvider(t){$("#form_patient_id").val(t),$("#form_select_provider").submit()}$(document).ready(function(){$("#search_patient_button").on("click",function(){$("#add_search_option").trigger("click"),$("#search_patient_input").val("");var t=getsearchtype();getPatients(t)}),$(".patient_list").on("click",".patient_list_item",function(){var t=$(this).attr("data-id"),e={id:t};getPatientInfo(e)}),$("#change_patient_button").on("click",function(){$(".patient_list").addClass("active"),$(".patient_info").removeClass("active"),$("#select_provider_button").removeClass("active"),$("#select_provider_button").attr("data-id",0),$("#import_patients").show()}),$("#select_provider_button").on("click",function(){var t=$(this).attr("data-id");selectProvider(t)}),$("#add_search_option").on("click",function(){var t=$("#search_patient_input_type").val(),e=$("#search_patient_input").val();if(""!=e){var n=getOptionContent(t,e);$(".search_filter").append(n),$("#search_patient_input").val("")}}),$(".search_filter").on("click",".remove_option",function(){$(this).parent().remove()}),$(".lastseenby_show").on("click",function(){$(".lastseen_content").toggleClass("active"),$(".lastseen_content").hasClass("active")?($(".lastseenby_icon").removeClass("glyphicon-chevron-right"),$(".lastseenby_icon").addClass("glyphicon-chevron-down")):($(".lastseenby_icon").removeClass("glyphicon-chevron-down"),$(".lastseenby_icon").addClass("glyphicon-chevron-right"))}),$(".referredby_show").on("click",function(){$(".referredby_content").toggleClass("active"),$(".referredby_content").hasClass("active")?($(".referredby_icon").removeClass("glyphicon-chevron-right"),$(".referredby_icon").addClass("glyphicon-chevron-down")):($(".referredby_icon").removeClass("glyphicon-chevron-down"),$(".referredby_icon").addClass("glyphicon-chevron-right"))}),$(".insurance_provider_show").on("click",function(){$(".insurance_provider_content").toggleClass("active"),$(".insurance_provider_content").hasClass("active")?($(".insurance_provider_icon").removeClass("glyphicon-chevron-right"),$(".insurance_provider_icon").addClass("glyphicon-chevron-down")):($(".insurance_provider_icon").removeClass("glyphicon-chevron-down"),$(".insurance_provider_icon").addClass("glyphicon-chevron-right"))})});
